<view class="container">
  <view class="header">
    <text class="header-icon">💰</text>
    <text class="title">个人所得税计算器</text>
  </view>

  <view class="card">
    <view class="input-group">
      <text class="label">工资收入 (税前)</text>
      <input type="digit" class="input" placeholder="请输入税前工资" bindinput="bindKeyInput" data-field="salary" />
    </view>

    <view class="input-group">
      <text class="label">五险一金个人缴费</text>
      <input type="digit" class="input" placeholder="请输入个人缴费总额" bindinput="bindKeyInput" data-field="socialSecurity" />
    </view>

    <view class="input-group">
      <text class="label">专项附加扣除</text>
      <input type="digit" class="input" placeholder="如子女教育、住房贷款利息等" bindinput="bindKeyInput" data-field="specialDeduction" />
    </view>
  </view>

  <button class="btn-calculate" bindtap="calculate">开始计算</button>

  <view class="result-area" wx:if="{{result !== null}}">
    <view class="result-card">
      <view class="result-item">
        <text class="result-label">应缴个人所得税</text>
        <text class="result-value">{{result}} 元</text>
      </view>
      <button class="btn-copy" bindtap="copyResult">复制结果</button>
    </view>

    <view class="detail-card" wx:if="{{detailProcess}}">
      <view class="detail-toggle" bindtap="toggleDetail">
        <text>详细计算过程</text>
        <text class="detail-toggle-icon">{{showDetail ? '▲' : '▼'}}</text>
      </view>
      <view class="detail-process" wx:if="{{showDetail}}">
        <text class="detail-content">{{detailProcess}}</text>
      </view>
    </view>
  </view>
</view>

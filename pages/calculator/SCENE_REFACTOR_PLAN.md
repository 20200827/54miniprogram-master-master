# 计算器模块场景化重构计划

**最后更新时间:** 2025-08-17

## 1. 项目背景与目标

当前计算器模块 (`pages/calculator/index`) 将所有计算工具平铺在一个列表中，用户在面对多个工具时可能感到困惑，无法快速找到解决自身问题的工具。

**核心目标:** 为了提升用户体验，我们将对计算器模块进行“场景化”重构。通过将工具与用户的实际需求场景相结合，引导用户更直观、更快速地找到所需功能。

## 2. 最终架构方案

经过讨论，我们确定了以下技术方案：

1.  **数据与视图分离**:
    *   在项目根目录下创建 `data/calculator-scenes/` 文件夹，用于存放场景数据。
    *   每个核心场景将由一个独立的 JSON 文件进行定义，例如 `salary.json`, `overtime.json` 等。这种结构便于未来维护、扩展，也为后续接入大语言模型动态生成内容打下基础。

2.  **导航-详情页面模式**:
    *   原有的 `pages/calculator/index` 页面将改造为 **场景导航页**，负责展示所有核心场景的入口。
    *   创建一个全新的、可复用的 **场景详情页** (`pages/calculator/scene/scene`)。该页面将根据导航页传递的参数（如场景ID），动态加载并渲染对应 JSON 文件中的数据（包括场景标题、描述、以及该场景下的工具列表）。

## 3. 开发步骤规划

- [ ] **创建文档**: (已完成) 创建本文档，明确重构计划。
- [ ] **创建数据结构**:
    - [ ] 创建 `data/calculator-scenes/` 目录。
    - [ ] 创建 `salary.json` 文件。
    - [ ] 创建 `overtime.json` 文件。
    - [ ] 创建 `social_insurance.json` 文件。
    - [ ] 创建 `severance.json` 文件。
- [ ] **创建场景详情页**:
    - [ ] 创建 `pages/calculator/scene/` 目录。
    - [ ] 编写 `scene.wxml` 布局文件。
    - [ ] 编写 `scene.js` 逻辑文件，实现数据动态加载。
    - [ ] 编写 `scene.wxss` 样式文件。
    - [ ] 编写 `scene.json` 配置文件。
- [ ] **改造导航主页**:
    - [ ] 修改 `pages/calculator/index.js` 的数据和逻辑。
    - [ ] 修改 `pages/calculator/index.wxml` 的页面结构。
- [ ] **注册新页面**:
    - [ ] 在 `app.json` 中注册新的 `pages/calculator/scene/scene` 页面。
- [ ] **联调与测试**:
    - [ ] 确保从主页跳转、数据加载、页面渲染、工具跳转等全流程通畅。
